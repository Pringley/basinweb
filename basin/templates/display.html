<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Basin</title>
    <link rel="shortcut icon" href="/static/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/static/css/normalize.css">
    <link rel="stylesheet" href="/static/css/display.css">
</head>

<body>
    <div class="main">
        <div class="nav">
        <a href="?state=active" class="nav-item"> Active </a>
        <a href="?state=sleeping" class="nav-item"> Sleeping </a>
        <a href="?state=blocked" class="nav-item"> Blocked </a>
        <a href="?state=delegated" class="nav-item"> Delegated </a>
        <a href="?state=completed" class="nav-item"> Completed </a>
        <a href="?state=trashed" class="nav-item"> Trashed </a>
        </div>
        <table class="task-list">
            {% for task in task_list %}
            <tr class="{% if task.project %}project{% else %}action{% endif %}">
                <form target="#" method="post">
                    <td class="chk-btn-td">
                        <button type="submit" name="submit" value="check"></button>
                    </td>
                    <td>
                        <input type="hidden" name="state" value="{{ state }}" />
                        <input type="hidden" name="id" value="{{ task.id }}" />
                        <b><a class="task-link" href="/admin/basin/task/{{ task.id }}" target="_blank">
                                {{ task.summary }}
                        </a></b>
                        {% if task.due %} (due {{ task.due }}) {% endif %}
                        {% if task.is_sleeping %}
                            {% if task.sleepforever %} (sleeping indefinitely) {% endif %}
                            {% if task.sleepuntil %} (sleeping until {{ task.sleepuntil }}) {% endif %}
                        {% endif %}
                        {% if task.is_blocked %}
                            (blocked on
                            {% for blocker in task.blockers.all %}'{{ blocker.summary }}'{% endfor %})
                        {% endif %}
                        {% if task.is_delegated %}
                        (delegated to
                        <a class="task-link" href="/admin/basin/assignee/{{task.assignee.id}}"
                            target="_blank">{{ task.assignee.name }}</a>)
                        {% endif %}
                        <br/>
                        <!--
                        <button>Sleep</button>
                        <button>Block</button>
                        <button>Delegate</button>
                        <button>Complete</button>
                        <button>Trash</button>
                        -->
                    </td>
                </form>
            </tr>
            {% endfor %}
        </table>
        <br/>
        <a class="admin-link" href="/admin/basin/task/?state=active">Admin interface</a>
    </div>
</body>
</html>
